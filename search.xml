<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Active Information Gathering</title>
      <link href="/2021/08/21/hello/"/>
      <url>/2021/08/21/hello/</url>
      
        <content type="html"><![CDATA[<h1 id="主机层面"><a href="#主机层面" class="headerlink" title="主机层面"></a>主机层面</h1><h2 id="Nmap"><a href="#Nmap" class="headerlink" title="Nmap"></a>Nmap</h2><blockquote><p>NMAP（Network Mapper）是一款开放源代码的网络探测和安全审核的工具。官网：<a href="https://nmap.org/">https://nmap.org/</a>。</p></blockquote><h3 id="扫描方式"><a href="#扫描方式" class="headerlink" title="扫描方式"></a>扫描方式</h3><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">TCP: -sT</span><br><span class="line">SYN: -sS</span><br><span class="line">ACK: -sA</span><br><span class="line">UDP: -sU</span><br><span class="line">RPC: -sR</span><br><span class="line">ICMP: -sP</span><br><span class="line">Disable port scan: -sn</span><br></pre></td></tr></table></figure><p>本人最常用的命令，就是流量大、耗时间。</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">nmap -sS -sV -Pn -vv -p- -A -T4 -O &lt;target&gt;</span><br><span class="line">nmap -sS -sC -sV -oA &lt;NAME&gt;.tcp &lt;target&gt; -v</span><br><span class="line">nmap -sU -sS -sC -sV -oA &lt;NAME&gt;.udp &lt;target&gt; -v </span><br></pre></td></tr></table></figure><h3 id="输出方式"><a href="#输出方式" class="headerlink" title="输出方式"></a>输出方式</h3><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">-oN &lt;File&gt;</span><br><span class="line">-oX &lt;XML File&gt;</span><br><span class="line">-oG &lt;filespec&gt;</span><br><span class="line"></span><br><span class="line">Grep输出参考http://www.unspecific.com/nmap-oG-output/ </span><br></pre></td></tr></table></figure><h3 id="T详解"><a href="#T详解" class="headerlink" title="-T详解"></a>-T详解</h3><ul><li><p>-T0 一个时间只能扫描一个端口</p></li><li><p>-T1 探测报文剪个15秒</p></li><li><p>-T2 探测报文间隔0.4秒，相比默认选项，会使用更少的带宽资源，以及降低对目标主机的压力</p></li><li><p>-T3 默认选项，包含了并行扫描</p></li><li><p>-T4 如果有合适可靠的网络，则加速扫描</p></li><li><p>-T5 该选项假设用户有特别快的网络或者为了获得速度牺牲准确性</p></li></ul><h3 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h3><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">--host-timeout 通常设置18000</span><br><span class="line">--scan-delay 通常设置1000</span><br><span class="line">-S 源地址，为了不被发现 </span><br><span class="line"></span><br><span class="line"># 输出美化</span><br><span class="line">sudo apt install xsltproc</span><br><span class="line">xsltproc -o ip.htm beautiful.xsl ip.xml</span><br></pre></td></tr></table></figure><h2 id="nmapAutomator"><a href="#nmapAutomator" class="headerlink" title="nmapAutomator"></a><a href="https://github.com/21y4d/nmapAutomator">nmapAutomator</a></h2><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">./nmapAutomator &lt;target&gt; All</span><br></pre></td></tr></table></figure><h2 id="AutoRecon"><a href="#AutoRecon" class="headerlink" title="AutoRecon"></a><a href="https://github.com/Tib3rius/AutoRecon">AutoRecon</a></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">autorecon &lt;IP&gt;&#x2F;CIDR</span><br></pre></td></tr></table></figure><h2 id="御剑"><a href="#御剑" class="headerlink" title="御剑"></a>御剑</h2><p><a href="https://pan.baidu.com/share/init?surl=Uh-FWsXOUlVUM3ZOpRWoYQ">御剑高速端口扫描器</a>（提取码：czne）。这里需要注意的是，线程高，需要注意安全哦～</p><h2 id="Masscan"><a href="#Masscan" class="headerlink" title="Masscan"></a><a href="https://github.com/robertdavidgraham/masscan">Masscan</a></h2><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul><li><p>世界上最快的扫描然间，3分钟内扫描整个互联网端口</p></li><li><p>相比nmap快很多，采用异步传输的方式，无状态扫描的方式</p></li><li><p>不建立完整的tcp连接，收到syn/ack后发送rst结束，选项–banners除外</p></li><li><p>nmap需要记录tcp/ip的状态，os能够处理的tcp/ip连接最多为1500左右</p></li><li><p><code>masscan --ping 28.41.0.0/16 --rate 1000000 #主机存活</code></p></li><li><p><code>masscan -iL tmp_scanip_list.tmp -p1-65535 -Pn -v --randomize-hosts --banners -ox result.xml --rate 100000</code></p></li><li><p>有时候扫到些设备发现很多端口都是开的，有可能遇到设备干扰。</p></li></ul><h3 id="高级选项"><a href="#高级选项" class="headerlink" title="高级选项"></a>高级选项</h3><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">--adapter-ip 指定发包IP地址</span><br><span class="line">--adapter-port 指定发包的源端口</span><br><span class="line">--adapter-mac 指定发包的源MAC地址</span><br><span class="line">--router-mac 指定网关的MAC地址</span><br><span class="line">--exclude IP地址范围黑名单，防止masscan扫描</span><br><span class="line">--excludefile  指定IP地址范围黑名单文件</span><br><span class="line">--includefile,-iL读取一个范围列表进行扫描</span><br><span class="line">--wait指定发送完包后的等待时间，默认10秒 </span><br></pre></td></tr></table></figure><h2 id="其他实用小命令"><a href="#其他实用小命令" class="headerlink" title="其他实用小命令"></a>其他实用小命令</h2><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">dnsrecon -r 192.168.0.0/24 -n &lt;DNS IP&gt; # DNS recon</span><br><span class="line">xprobe2 &lt;target&gt; # Guessing OS </span><br><span class="line"></span><br><span class="line"># SMB enumerations</span><br><span class="line">enum4linux -a &lt;target&gt;</span><br><span class="line">enum4linux -a -u &lt;user&gt; -p &lt;password&gt; &lt;target&gt; </span><br></pre></td></tr></table></figure><h2 id="在线端口扫描"><a href="#在线端口扫描" class="headerlink" title="在线端口扫描"></a>在线端口扫描</h2><ul><li><a href="https://pentest-tools.com/network-vulnerability-scanning/udp-port-scanner-online-nmap">Nmap UDP Scan</a></li></ul><h1 id="Web层面"><a href="#Web层面" class="headerlink" title="Web层面"></a>Web层面</h1><h2 id="版本识别"><a href="#版本识别" class="headerlink" title="版本识别"></a>版本识别</h2><h3 id="robots-txt文件识别"><a href="#robots-txt文件识别" class="headerlink" title="robots.txt文件识别"></a>robots.txt文件识别</h3><p>搜索引擎可以通过robots文件可以获知哪些页面可以爬取，哪些页面不可以爬取。Robots协议是网站国际互联网界通行的道德规范，其目的是保护网站数据和敏感信息、确保用户个人信息和隐私不被侵犯，如果robots.txt文件编辑的太过详细，反而会泄露网站的敏感目录或者文件，比如网站后台路径，从而得知其使用的系统类型，从而有针对性地进行利用。</p><h3 id="请求头信息"><a href="#请求头信息" class="headerlink" title="请求头信息"></a>请求头信息</h3><ul><li><p>查看HTTP响应报头的X-Powered-By字段来识别</p></li><li><p>根据Cookies来进行判断，比如一些WAF会在返回头中包含一些信息，如360wzws、Safedog、yunsuo等</p></li><li><p>根据Header中Server信息来判断，如DVDDVS-Webs、yunjiasu-ngix、Mod_Security、nginx-wallarm等</p></li><li><p>根据WWW-Authenticate进行判断，一些路由交换设备可能存在这个字段，如NETCORE、huawei、h3c等设备</p></li></ul><h3 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h3><p>注释中可能涵盖一些软件和版本信息。</p><h3 id="正常页面或报错信息关键字"><a href="#正常页面或报错信息关键字" class="headerlink" title="正常页面或报错信息关键字"></a>正常页面或报错信息关键字</h3><ul><li><p>先访问首页或特定页面如robots.txt等版权信息，通过正则的方式去匹配某些关键字，如Powered by Discuz、dedecms等</p></li><li><p>构造错误页面，根据报错信息来判断使用的CMS或者中间件信息，比较常见的如tomcat的报错页面</p></li></ul><h3 id="静态资源的MD5值"><a href="#静态资源的MD5值" class="headerlink" title="静态资源的MD5值"></a>静态资源的MD5值</h3><p>一些网站的特定图片文件、JS文件、CSS静态文件，如favicon.ico、css、logo.ico、js等文件一般不会修改，通过爬虫对这些文件进行抓取并计算MD5值，与指纹库中MD5值进行对比，如果是相同则是同一个CMS。这里需要用到一个工具<a href="https://github.com/TideSec/TideFinger">TideFinger</a>。</p><h2 id="目录扫描"><a href="#目录扫描" class="headerlink" title="目录扫描"></a>目录扫描</h2><ul><li><p><a href="https://www.fujieace.com/hacker/tools/yujian.html">御剑</a></p></li><li><p><a href="https://github.com/7kbstorm/7kbscan-WebPathBrute">7kbstorm</a></p></li><li><p><a href="https://github.com/lijiejie/BBScan">bbscan</a></p></li><li><p><a href="https://github.com/H4ckForJob/dirmap">dirmap</a></p></li><li><p><a href="https://github.com/maurosoria/dirsearch">dirsearch</a></p></li><li><p><a href="https://github.com/GerbenJavado/LinkFinder">LinkFinder</a></p></li><li><p><a href="https://github.com/Threezh1/JSFinder">JSFinder</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Red Team </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Information Gathering </tag>
            
            <tag> Active Information Gathering </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
